<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Working with Pattern.Match
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Functional primitives for Unity3D"/>
    <meta name="author" content="devboy"/>

    <script src="https://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="https://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet"/>

    <link type="text/css" rel="stylesheet" href="/Wooga.Lambda-CSharp/content/style.css"/>
    <script type="text/javascript" src="/Wooga.Lambda-CSharp/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="container">
    <div class="masthead">
        <ul class="nav nav-pills pull-right">
            <li>
                <a href="http://wooga.com">wooga.com</a>
            </li>
            <li>
                <a href="http://github.com/wooga/Wooga.Lambda-CSharp">github page</a>
            </li>
        </ul>
        <h3 class="muted">
            <a href="/Wooga.Lambda-CSharp/index.html">Wooga.Lambda</a>
        </h3>
    </div>
    <hr/>
    <div class="row">
        <div class="span9" id="main">
            
<h1><a name="Working-with-Pattern-Match" class="anchor" href="#Working-with-Pattern-Match">Working with Pattern.Match</a></h1>

<blockquote>
  <p>In computer science, <strong>pattern matching</strong> is the act of checking
a given sequence of tokens for the presence of the constituents of some pattern.
In contrast to pattern recognition, the match usually has to be exact.
The patterns generally have the form of either sequences or tree structures.
<em>- Wikipedia</em></p>
</blockquote>

<p>Most of these ideas are stolen from <a href="http://journal.stuffwithstuff.com/"><strong>Bob Nystrom</strong></a> and his blogpost on <a href="http://journal.stuffwithstuff.com/2009/05/13/ml-style-pattern-matching-in-c/"><em>ML-style Pattern Matching in C#</em></a>.
In contrast to his examples: this version is entirely <strong>expression-based</strong> and does <strong>not yet extract fields</strong> of input values like <strong>monads</strong> or <strong>discriminated unions</strong>. It might be possible to use <strong>tuples</strong> with <strong>structural equality</strong> to allow for matching on <strong>nested data-structures</strong> in the future,
which would be pretty close to what most functional languages offer.</p>

<h2><a name="Matching-on-equality" class="anchor" href="#Matching-on-equality">Matching on <em>equality</em></a></h2>

<p>In this case the objects <strong>Equals('T)</strong> method is used</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs"><span class="k">var</span> i <span class="o">=</span> Pattern&lt;<span class="k">int</span>&gt;
        .Match(<span class="s">"hugo"</span>)
        .Case(<span class="s">"hans"</span>, _ <span class="o">=</span><span class="o">&gt;</span> 1)
        .Case(<span class="s">"hugo"</span>, _ <span class="o">=</span><span class="o">&gt;</span> 2)
        .Run(); <span class="c">// 2</span>
</pre></td></tr></table>

<h2><a name="Case-order-is-important" class="anchor" href="#Case-order-is-important"><em>Case order</em> is important</a></h2>

<p>The first <strong>case</strong> to match the input will yield the result</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs"><span class="k">var</span> i <span class="o">=</span> Pattern&lt;<span class="k">int</span>&gt;
        .Match(<span class="s">"hugo"</span>)
        .Case(<span class="s">"hugo"</span>, _ <span class="o">=</span><span class="o">&gt;</span> 1)
        .Case(<span class="s">"hugo"</span>, _ <span class="o">=</span><span class="o">&gt;</span> 2)
        .Run(); <span class="c">// 1</span>
</pre></td></tr></table>

<h2><a name="Providing-a-default-case" class="anchor" href="#Providing-a-default-case">Providing a <em>default case</em></a></h2>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs"><span class="k">var</span> i <span class="o">=</span> Pattern&lt;<span class="k">int</span>&gt;
        .Match(<span class="s">"hugo"</span>)
        .Run(); <span class="c">// this causes an exception</span>
</pre></td></tr></table>

<p>When no case matches the input an <strong>exception</strong> is thrown,
providing a <strong>default case</strong> will avoid that</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs"><span class="k">var</span> i <span class="o">=</span> Pattern&lt;<span class="k">int</span>&gt;
        .Match(<span class="s">"hugo"</span>)
        .Default(_ <span class="o">=</span><span class="o">&gt;</span> 0)
        .Run(); <span class="c">// 0</span>
</pre></td></tr></table>

<h2><a name="Matching-on-predicates" class="anchor" href="#Matching-on-predicates">Matching on <em>predicates</em></a></h2>

<p>Lambdas of the type <strong>'T-&gt;bool</strong> can also be used to match the input</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs">Func&lt;<span class="k">int</span>,Func&lt;<span class="k">string</span>,<span class="k">bool</span>&gt;<span class="o">&gt;</span> p <span class="o">=</span> x <span class="o">=</span><span class="o">&gt;</span> s <span class="o">=</span><span class="o">&gt;</span> s.Length <span class="o">&lt;</span> x;
<span class="k">var</span> i <span class="o">=</span> Pattern&lt;<span class="k">string</span>&gt;
        .Match(<span class="s">"hugo"</span>)
        .Case(s <span class="o">=</span><span class="o">&gt;</span> s.Length <span class="o">=</span><span class="o">=</span> 0, _ <span class="o">=</span><span class="o">&gt;</span> <span class="s">"A"</span>)
        .Case(p(3), _ <span class="o">=</span><span class="o">&gt;</span> <span class="s">"B"</span>)
        .Case(p(5), _ <span class="o">=</span><span class="o">&gt;</span> <span class="s">"C"</span>)
        .Default(_ <span class="o">=</span><span class="o">&gt;</span> <span class="s">"D"</span>)
        .Run(); <span class="c">// "C"</span>
</pre></td></tr></table>

<h2><a name="Matching-on-types" class="anchor" href="#Matching-on-types">Matching on <em>types</em></a></h2>

<p>Adding a type parameter allows for sub-type matching of the input</p>

<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip" lang="cs"><span class="k">var</span> just <span class="o">=</span> Maybe.Just(<span class="s">"hans"</span>)();
<span class="k">var</span> not <span class="o">=</span> Maybe.Nothing&lt;<span class="k">string</span>&gt;()();

<span class="k">var</span> s1 <span class="o">=</span> Pattern&lt;<span class="k">string</span>&gt;
        .Match(just)
        .Case&lt;Maybe.Result&lt;<span class="k">string</span>&gt;.Just&gt;(x <span class="o">=</span><span class="o">&gt;</span> <span class="s">"just"</span>)
        .Case&lt;Maybe.Result&lt;<span class="k">string</span>&gt;.Nothing&gt;(x <span class="o">=</span><span class="o">&gt;</span> <span class="s">"not"</span>)
        .Run(); <span class="c">// "just"</span>

<span class="k">var</span> s2 <span class="o">=</span> Pattern&lt;<span class="k">string</span>&gt;
        .Match(not)
        .Case&lt;Maybe.Result&lt;<span class="k">string</span>&gt;.Just&gt;(x <span class="o">=</span><span class="o">&gt;</span> <span class="s">"just"</span>)
        .Case&lt;Maybe.Result&lt;<span class="k">string</span>&gt;.Nothing&gt;(x <span class="o">=</span><span class="o">&gt;</span> <span class="s">"not"</span>)
        .Run(); <span class="o">/</span><span class="o">/</span> <span class="s">"not"</span></pre></td></tr></table>


        </div>
        <div class="span3">
            <ul class="nav nav-list" id="menu" style="margin-top: 20px;">
                <li>
                    <img src="/Wooga.Lambda-CSharp/img/logo.png" alt="F# Project" style="margin: 10px; width: 150px;"/>
                </li>
                <!-- <li>
                    <img src="http://issuestats.com/github/wooga/Wooga.Lambda-CSharp/badge/issue" alt="F# Project" style="width:180px;margin:5px"/>
                </li>
                <li>
                    <img src="http://issuestats.com/github/wooga/Wooga.Lambda-CSharp/badge/pr" alt="F# Project" style="width:180px;margin:5px"/>
                </li> -->
                <li class="nav-header">Wooga.Lambda</li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/index.html">Home page</a>
                </li>
                <li class="divider"></li>
                <li>
                    <a href="http://nuget.org/packages/Wooga.Lambda">Get Library via NuGet</a>
                </li>
                <li>
                    <a href="http://github.com/wooga/Wooga.Lambda-CSharp">Source Code on GitHub</a>
                </li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/license.html">License</a>
                </li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/release-notes.html">Release Notes</a>
                </li>

                <li class="nav-header">Get Started</li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.maybe.html">Monad.Maybe</a>
                </li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.either.html">Monad.Either</a>
                </li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.async.html">Concurrent.Async</a>
                </li>
                <!-- <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.agent.html">Concurrent.Agent</a>
                </li> -->
                <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.patternmatch.html">Control.Pattern</a>
                </li>
                <!-- <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.logging.agent.html">LoggingAgent</a>
                </li> -->
                <!-- <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.network.httpclient.html">Network.HttpClient</a>
                </li> -->
                <!-- <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.filesystem.html">FileSystem</a>
                </li> -->
                <!-- <li>
                    <a href="/Wooga.Lambda-CSharp/wooga.lambda.parser.html">Parser</a>
                </li> -->

                <li class="nav-header">Documentation</li>
                <li>
                    <a href="/Wooga.Lambda-CSharp/reference/index.html">API Reference</a>
                </li>

                <li>
                    <img src="https://travis-ci.org/wooga/Wooga.Lambda-CSharp.png" alt="F# Project" style="margin: 5px"/>
                </li>
                <li>
                    <img src="http://img.shields.io/nuget/v/Wooga.Lambda.svg?style=flat" alt="F# Project" style="margin: 5px"/>
                </li>
            </ul>
        </div>
    </div>
</div>
<a href="http://github.com/wooga/Wooga.Lambda-CSharp">
    <img style="border: 0; position: absolute; right: 0; top: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"/>
</a>
</body>
</html>
